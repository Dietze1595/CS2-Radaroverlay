<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>

	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" href="css/circle.css">
</head>

<body>
	<div class="page hidden">			
			<div style="width:25%; position: absolute; top:0; left:-5px; border-bottom: 2px solid #FF5500; border-image: linear-gradient(to right, #FF5500, #fff,#FF5500) 1; background-image: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(0,0,0,1) 15%, rgba(0,0,0,1) 85%, rgba(255,255,255,0) 100%);">
				<table align="center" style="font-size:0.07em; width:100%; font-weight: bold">
					<tbody>
						<tr style="width:100%; color: white">
							<td style="width:45%; text-align:center; font-size:20px; font-weight:bolder">
								<span id="playerOwnTeamName"></span> 
							</td>
							<td style="width:5%; text-align:center; font-size:20px; font-weight:bolder">
								<span></span>
							</td>
							<td style="width:45%; text-align:center; font-size:20px; font-weight:bolder">
								<span id="playerEnemyTeam"></span>
							</td>
						</tr>
						
						<tr style="font-size:16px; font-weight:bold; color:white">
							<td style="text-align:center; width:45%">
								<span>Avg. Elo:</span>
								<span id="ownTeamAvgElo"></span>
							</td>
							<td style="text-align:center; width:5%">VS</td>
							<td style="text-align:center; width:45%"
								<span>Avg. Elo:</span>
								<span id="enemyTeamAvgElo"></span>
							</td>
						</tr>
											
						<tr style="font-size:16px; font-weight:bold" align="center, width:100%">
							<td style="width:45%; text-align:center; font-size:20px; font-weight:bolder; color:green">
								<span id="plusElo"></span>
							</td>
							<td style="width:5%; text-align:center; font-size:12px; font-weight:bolder; color:#FF7D00">
								<span>ELO: </span><span id="playerElo"></span>
							</td>
							<td style="width:45%; text-align:center; font-size:20px; font-weight:bolder; color:red">
								<span id="minusElo"></span>
							</td>
						</tr>
						
					</tbody>
				</table>
			</div>
		</div>
		<script>
			var slideIndex = 0;
			showSlides();

			function showSlides() {
			  var i;
			  var slides = document.getElementsByClassName("mySlides");
			  var dots = document.getElementsByClassName("dot");
			  for (i = 0; i < slides.length; i++) {
				slides[i].style.display = "none";  
			  }
			  slideIndex++;
			  if (slideIndex > slides.length) {slideIndex = 1}    
			  for (i = 0; i < dots.length; i++) {
				dots[i].className = dots[i].className.replace(" active", "");
			  }
			  slides[slideIndex-1].style.display = "block";  
			  dots[slideIndex-1].className += " active";
			  setTimeout(showSlides, 10000); // Change image every 2 seconds
			}
		</script>
		<script src="/socket.io/socket.io.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script>
			var socket = io();
			socket.on('test', function (json) {
				if (json == null || json.gamestate === 0) {
					$(".page").removeClass("visible");
					$(".page").addClass("hidden");
					
				} else if (json.gamestate === 1) {					
					if (json.requeststate === 1) {
					} else {
					
						if (json.kills === undefined) {
						} else {
							if (json.gamename === "Faceit") {
								$(".page").removeClass("hidden");
								$(".page").addClass("visible");
							} else {
								$(".page").removeClass("visible");
								$(".page").addClass("hidden");
							}
							
							
							document.getElementById("playerElo").innerHTML = json.elo;

							document.getElementById("playerOwnTeamName").innerHTML = json.ownTeamname;
							document.getElementById("playerEnemyTeam").innerHTML = json.enemyTeamname;
							document.getElementById("ownTeamAvgElo").innerHTML = json.ownTeamAVGElo;
							document.getElementById("enemyTeamAvgElo").innerHTML = json.enemyTeamAVGElo;
							document.getElementById("plusElo").innerHTML = json.winElo;
							document.getElementById("minusElo").innerHTML = json.lossElo;


							var kd = 0;
							var kdlength = 1;
							if (json.deaths === 0 && json.kills === 0) {
								kd = 0;
								kdlength = 0.5;
							} else if (json.deaths === 0) {
								kd = json.kills;
							} else {
								kd = json.kills / json.deaths;
								kdlength = json.kills / (json.kills + json.deaths);
							}
							$("#barchartKills").width($(".progress").width() * kdlength);
						}
					}
				} else {}
			});
		</script>
	</div>

</body>

</html>
